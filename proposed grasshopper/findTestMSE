function [mseTest] = findTestMSE(individual,normData,targets,outputSize,trainLen,testLen,inputSize,initLen,...
    leakyMat,resMat,inputWeights, resWeights,outputWeights,bestResEx)
%UNTITLED4 Summary of this function goes here
%   Detailed explanation goes here


leaky = leakyMat(individual(1));


%testing main
yPredicted = zeros(testLen,outputSize);

for t = 1:testLen %
    u = normData(trainLen+t,:)';
    x = (1-leaky)*x + leaky*tanh(inputWeights*[1;u] + resWeights*x);
    ySmall =  outputWeights*[1;u;x];
    yPredicted(t) = ySmall;
end

yReal = targets(trainLen+1:trainLen+testLen);
squareErrors = (yReal-yPredicted).^2;
mseTest = sum(squareErrors)/length(yPredicted);

end

